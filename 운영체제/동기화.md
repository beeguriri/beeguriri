# 동기화
- 프로세스 또는 스레드들이 수행되는 시점 조절

## 📑 Race Condition
- 두개 이상의 스레드들이 공유된 자원에 접근 시
- 하나의 자원을 놓고 서로 경쟁하려는 상황

## 📑 임계영역
- 공유되는 자원에서 문제가 발생하지 않도록 독점을 보장해줘야 하는 영역
- 프로세스가 `임계영역 실행 시작`하면 `임계영역 실행 종료`까지 방해받지않고 수행되어야 함
### 임계영역 해결 조건
- 상호배제 : 하나의 프로세스가 임계 구역에 들어가 있다면 다른 프로세스는 들어갈 수 없어야 한다.
- 진행 : 임계 구역에 들어간 프로세스가 없는 상태에서, 들어가려고 하는 프로세스가 여러 개 있다면 어느 것이 들어갈지를 적절히 결정해주어야 한다.
- 제한된 대기 : 다른 프로세스의 기아(Starvation)를 방지하기 위해, 한 번 임계 구역에 들어간 프로세스는 다음 번 임계 구역에 들어갈 때 제한을 두어야 한다.
### 해결방법
#### 소프트웨어
- 데커 알고리즘 (N=2)
```c
while(1){
  flag[i] = true;          //프로세스i 임계영역 진입 알림
  while(flag[j]) {        //프로세스j 임계영역 진입 여부 확인
    if(turn==j) {        //프로세스j가 임계영역 내부에 있으면
      flag[i] = false;    //프로세스i의 진입 취소
      while(turn==j);      //프로세스j 수행
      flag[i] = true;      //프로세스i 진입 알림
    }
  }
  //임계구역
  //...

  //임계구역 
  turn = j;                //임계구역 사용 후 프로세스j에 차례 넘김
  flag[i] = false;        //프로세스i 임계구역 사용 완료 알림
}
```
- 피터슨 알고리즘 (N=2)
```c
while(1){
  flag[i] = true;          //프로세스i 임계영역 진입 알림
  turn = j;
  while(flag[j] && turn==j){
    //임계구역 사용 가능한지 계속 확인
  };

  //임계구역 시작
  //...

  //임계구역 끝
  flag[i] = false;
}
```
- 빵집알고리즘 (N>2)
#### 하드웨어
- Test and Set
- Swap
#### 세마포어, 뮤텍스
- 세마포어 : 현재 공유자원에 접근할 수 있는 스레드, 프로세스 수 나타내는 값을 두어 상호배제 달성
  - S: 세마포어 변수(정수형)
  - P연산: wait
  - V연산: signal
- 뮤텍스 : 한 스레드, 한 프로세스에 의해 소유될 수 있는 키를 기반으로 하는 상호배제
